// patches for parts introduced by the mod "mk2 stockalike expansion" aka Mk2Expansion
// similar rules apply. 
//
// increase fuel / oxidizer by 60% (30% for 1.25 adapters)
// increase fuel tank mass by ~60% (~30% for 1.25 adapters, both rounded to 10kg)
//
// enable lifting body drag for parts with ModuleLiftingSurface
// reduce top/bottom face drag coefficient of parts with ModuleLiftingSurface to 0.74
// reduce top/bottom face drag coefficient of parts without ModuleLiftingSurface to 0.76
// increase top/bottom face drag coefficient of parts with payload bays open to like 0.9


// aero
// 1.25m to Mk2 inline intake adapter 
// fuel, lifting wing, custom drag cube
@PART[M2X_InlineIntake]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.11429 // 0.39, up from 0.35, adjusted to take account for the intake weight
    @cost *= 1.11254 // 1730, up from 1555

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.3
        @maxAmount *= 1.3
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    @DRAG_CUBE
    {
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// shroudable aerospace adapter
// even though this is a payload bay we still
// give this a low open drag coefficient, as it meant to be
// used open. That said, the drag cube for this thing
// is all kinds of whack anyway
// no fuel, lifting wing, and custom drag cubes
@PART[M2X_AeroIntake]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    @DRAG_CUBE
    {
        // closed
        @cube,0[14] = 0.74
        @cube,0[17] = 0.74
        // open
        @cube,1[14] = 0.74
        @cube,1[17] = 0.74
    }
}

// twin circular intake
// no fuel, no lifting wing, default drag cube
@PART[M2X_circularintake]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.445,0.6375,1.345, 1.445,0.637,1.832, 2.663,0.7757,1.213, 2.664,0.9116,0.7587, 2.37,0.8495,0.8267, 2.37,0.8526,0.8267, 0,0.3098,0.0008891, 2.5,1.116,1.5
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// engine shroud
// note: does not actually shroud engines
// no fuel, lifting wing, custom drag cube
@PART[M2X_EngineShroud]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    @DRAG_CUBE
    {
        // we just adapt the m2x drag cube. It doesn't really match any of the variants, but it's good enough.
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// ram air intake
// no fuel, lifting wing, default drag cube
@PART[M2X_MantaIntake]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.637,0.6252,1.345, 2.637,0.6249,1.345, 2.516,0.3875,2.483, 2.516,0.9614,2.514, 4.928,0.8625,1.443, 4.928,0.8471,0.7417, 0,-0.6337,-5.502E-05, 2.5,2.483,1.504
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// precooler inline intake
// tiny amount of fuel? lifting wing, default drag cube
@PART[M2X_Precooler]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.05 // 0.42t, up from 0.40t, adjusted for intake weight
    @cost *= 1.05102 // 2575, up from 2450

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.114,0.6204,1.334, 3.114,0.6203,1.334, 2.494,0.9062,0.6678, 2.494,0.9018,0.6678, 5.176,0.8849,0.78, 5.176,0.8849,0.78, 0,-0.03689,1.502E-05, 2.5,2.07,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// Mk2 shock cone
// no fuel, no lifting wing, default drag cube
@PART[M2X_Shockcone]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.114,0.6204,1.334, 3.114,0.6203,1.334, 2.494,0.9062,0.6678, 2.494,0.9018,0.6678, 5.176,0.8849,0.78, 5.176,0.8849,0.78, 0,-0.03689,1.502E-05, 2.5,2.07,1.5
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// Mk2 tail boom
// no fuel, lifting wing, default drag cube
@PART[M2X_Tailboom]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        // this is the drag cube of the centered variant, but they differ little
        cube = Default, 5.706,0.5933,1.358, 5.706,0.5928,1.358, 2.513,0.9502,1.039, 2.513,0.1829,5.409, 7.18,0.8932,0.8527, 7.18,0.895,0.8259, 0,-2.091,-0.006084, 2.505,5.317,1.512
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// command.

// rover cockpit.
// For some reason this part has 4 identical drag cubes calculated, probably due to the lights.
// no fuel, no lifting wing, default drag cube
@PART[M2X_DropshipCockpit]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 1.907,0.6328,1.346, 1.907,0.634,1.357, 2.499,0.4435,1.892, 2.499,0.9545,0.2267, 2.533,0.7866,1.06, 2.533,0.7956,0.9, 2.742E-05,0.3281,0, 2.503,1.794,1.5
        cube = B, 1.907,0.6328,1.346, 1.907,0.634,1.357, 2.499,0.4435,1.892, 2.499,0.9545,0.2267, 2.533,0.7866,1.06, 2.533,0.7956,0.9, 2.742E-05,0.3281,0, 2.503,1.794,1.5
        cube = A, 1.907,0.6328,1.346, 1.907,0.634,1.357, 2.499,0.4435,1.892, 2.499,0.9545,0.2267, 2.533,0.7866,1.06, 2.533,0.7956,0.9, 2.742E-05,0.3281,0, 2.503,1.794,1.5
        cube = B, 1.907,0.6328,1.346, 1.907,0.634,1.357, 2.499,0.4435,1.892, 2.499,0.9545,0.2267, 2.533,0.7866,1.06, 2.533,0.7956,0.9, 2.742E-05,0.3281,0, 2.503,1.794,1.5
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// 3-seater hypersonic cockpit
// no fuel, lifting wing, default drag cubes
@PART[M2X_BladeCockpit]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 4.021,0.5642,1.346, 4.021,0.5659,1.346, 2.499,0.1749,4.449, 2.499,0.9545,0.2323, 6.492,0.8763,0.86, 6.492,0.8552,0.8333, 2.384E-07,1.609,0, 2.503,4.356,1.5
        cube = B, 4.021,0.5642,1.346, 4.021,0.5659,1.346, 2.499,0.1749,4.449, 2.499,0.9545,0.2323, 6.492,0.8763,0.86, 6.492,0.8552,0.8333, 2.384E-07,1.609,0, 2.503,4.356,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// The fishhead
// this is a weird one. Due to its rotation it can't be a lifting wing.
// and it's actually the left/right (Xn/Xp) faces that need tweaking
// no fuel, no lifting wing, default drag cubes
@PART[M2X_TunaCockpit]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 4.075,0.8387,1.473, 4.075,0.8389,1.473, 2.494,0.3012,2.638, 2.494,0.9662,0.2379, 2.371,0.5913,1.98, 2.371,0.5374,1.98, -1.252E-05,0.6927,3.362E-05, 1.5,2.557,2.5
        cube = B, 4.075,0.8387,1.473, 4.075,0.8389,1.473, 2.494,0.3012,2.638, 2.494,0.9662,0.2379, 2.371,0.5913,1.98, 2.371,0.5374,1.98, -1.252E-05,0.6927,3.362E-05, 1.5,2.557,2.5
        @cube,*[2] = 0.76
        @cube,*[5] = 0.76
    }
}

// SR-71 cockpit
// no fuel, lifting wing, custom drag cubes
@PART[M2X_RavenCockpit]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    @DRAG_CUBE
    {
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// one person cockpit with builtin air intakes
// and three variants with run-time re-rendered drag cubes
// no fuel, lifting wing, default drag cubes
@PART[M2X_ViperCockpit]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        // this is the drag cube of the viper style cockpit. The other ones are close enough.
        cube = A, 4.271,0.6485,1.357, 4.271,0.6449,1.346, 2.588,0.2969,4.061, 2.587,0.9276,1.207, 5.901,0.831,0.9601, 5.901,0.8315,0.9744, -9.298E-06,1.411,-0.06355, 2.503,3.959,1.627
        cube = B, 4.271,0.6485,1.357, 4.271,0.6449,1.346, 2.588,0.2969,4.061, 2.587,0.9276,1.207, 5.901,0.831,0.9601, 5.901,0.8315,0.9744, -9.298E-06,1.411,-0.06355, 2.503,3.959,1.627
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// engines

// mk2 linear aerospike
// no fuel, lifting wing, default drag cube
@PART[M2X_LinearAerospike]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 2.751,0.5646,1.345, 2.751,0.5645,1.345, 2.498,0.9818,0.1593, 2.498,0.7196,1.927, 4.59,0.9006,0.7008, 4.59,0.9007,0.7008, 0,-0.3992,0.0009489, 2.5,1.831,1.502
        cube = Clean, 1.173,0.6334,1.345, 1.173,0.6334,1.345, 2.494,0.9834,0.165, 2.494,0.4981,1.65, 3.451,0.8618,0.8333, 3.451,0.8642,0.8333, 0,-0.2602,0.001898, 2.5,1.553,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 atmosphere optimized rocket engine
// no fuel, lifting wing, default drag cube
@PART[M2X_RocketEngineAtmo]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 2.021,0.5682,1.345, 2.021,0.5682,1.345, 2.494,0.9768,0.1644, 2.494,0.7723,1.37, 3.369,0.8999,0.7, 3.369,0.8999,0.7, 0,-0.1202,0, 2.5,1.353,1.5
        cube = Clean, 1.324,0.6175,1.345, 1.324,0.6174,1.345, 2.494,0.9768,0.1658, 2.494,0.5334,1.262, 2.588,0.8041,0.8467, 2.588,0.8047,0.8467, 0,-0.02583,0, 2.5,1.164,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 air-boosted liquid fueled rocket engine
// no fuel, lifting wing, default drag cube
@PART[M2X_AugmentedRocket]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 1.644,0.5632,1.345, 1.644,0.5625,1.345, 2.515,0.9426,0.2428, 2.511,0.9105,1.189, 2.734,0.9008,0.7028, 2.734,0.9012,0.7028, 0,-0.04845,0.003436, 2.5,1.09,1.507
        cube = Clean, 1.449,0.5595,1.345, 1.449,0.5601,1.345, 2.501,0.9479,0.2413, 2.494,0.6701,1.129, 2.265,0.8738,0.8333, 2.265,0.8716,0.8467, 0,-0.01884,0.006872, 2.5,1.031,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 rapier thing
// no fuel, lifting wing, default drag cube
@PART[M2X_ESTOCv2]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 2.717,0.5643,1.313, 2.717,0.5643,1.313, 2.494,0.972,0.1657, 2.494,0.7667,0.6626, 4.541,0.9014,0.7, 4.541,0.9014,0.7, 1.192E-07,-0.4012,5.96E-08, 2.5,1.812,1.5
        cube = Clean, 2.276,0.5794,1.345, 2.276,0.5799,1.345, 2.494,0.972,0.1617, 2.494,0.4927,1.771, 3.752,0.8847,0.84, 3.752,0.8855,0.84, 1.192E-07,-0.3323,5.96E-08, 2.5,1.674,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 ion engine
// no fuel, no lifting wing, default drag cube
@PART[M2X_IonEngine]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 1.354,0.5668,1.324, 1.354,0.5668,1.324, 2.503,0.9463,0.2432, 2.503,0.9138,0.9859, 2.246,0.9012,0.7, 2.246,0.9012,0.7, -2.623E-06,-0.1264,-6.914E-06, 2.5,0.9075,1.5
        cube = Clean, 0.9913,0.5626,1.345, 0.9913,0.5627,1.345, 2.503,0.9463,0.2435, 2.503,0.6694,0.8953, 1.679,0.8688,0.9333, 1.679,0.8708,0.7067, 0,-0.07339,-1.496E-05, 2.5,0.8014,1.5
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// jumpjet
// this is a radially mounted part, so for now we'll ignore it
// @PART[M2X_Jumpjet]:NEEDS[Mk2Expansion]:FIRST
// {

// }

// mk2 ventral rocket engines
// no fuel, lifting surface, default drag cube
@PART[M2X_FuselageRVTOLE]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.494,0.5897,1.324, 1.494,0.5893,1.324, 2.545,0.9432,0.7906, 2.545,0.9433,0.7906, 2.49,0.875,0.7, 2.49,0.9013,0.7, 0,4.801E-05,-1.502E-05, 2.5,1,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 inline lift fan
// broken custom drag cube found
// todo: report this
// notes: A = hatches open, B = hatches closed. Fairing/Clean control fairing state, rest is control surface logic
// todo: figure out if this is good enough with how the weight mixing works.
// no fuel, no lifting surface, default drag cube
@PART[M2X_FuselageLiftFan]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 2.535,0.6704,1.683, 2.535,0.6704,1.683, 2.602,0.97,0.7644, 2.602,0.9731,0.7644, 7.357,0.8881,1.107, 8.415,0.9169,0.8, 1.192E-07,0.002407,0.006872, 3.318,2.585,1.5
        cube = B, 3.864,0.5995,1.271, 3.864,0.5996,1.271, 2.494,0.9746,0.7644, 2.494,0.9782,0.7644, 6.476,0.8668,0.7, 6.476,0.8668,0.7, 0,0.002407,0.006864, 2.5,2.585,1.5
        cube = Fairing, 3.864,0.5995,1.271, 3.864,0.5996,1.271, 2.494,0.9746,0.7644, 2.494,0.9782,0.7644, 6.476,0.8668,0.7, 6.476,0.8668,0.7, 0,0.002407,0.006864, 2.5,2.585,1.5
        cube = Clean, 1.482,0.7589,2.361, 1.482,0.7586,2.382, 2.494,0.9746,0.1669, 2.494,0.8479,2.452, 4.304,0.7603,1.107, 5.369,0.8309,0.92, 0,0.06452,0.006872, 2.5,2.46,1.5
        cube = neutral, 1.482,0.7589,2.361, 1.482,0.7586,2.382, 2.494,0.9746,0.1669, 2.494,0.8479,2.452, 4.304,0.7603,1.107, 5.369,0.8309,0.92, 0,0.06452,0.006872, 2.5,2.46,1.5
        cube = fullDeflectionPos, 1.892,0.749,2.361, 1.892,0.7492,2.351, 4.292,0.8374,1.476, 3.744,0.7084,1.604, 2.426,0.8136,2.144, 2.426,0.8138,1.251, 0,0.4858,1.55E-06, 2.5,1.618,2.331
        cube = fullDeflectionNeg, 1.882,0.7554,2.361, 1.882,0.754,2.372, 3.744,0.806,1.648, 4.292,0.797,0.4393, 2.41,0.8135,1.241, 2.41,0.8135,1.241, 0,0.5195,-1.55E-06, 2.5,1.55,2.331
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
        @cube,0[14] = 0.9
        @cube,0[17] = 0.9
    }
}

// mk2 endcap or radial lift fan
// this really isn't the most aerodynamic part, but it's hard to figure out what the right settings for this would be.
// no fuel, no lifting surface, default drag cube
@PART[M2X_LiftFan]:NEEDS[Mk2Expansion]:FIRST
{
    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        // this is the drag cube of the stack variant
        cube = neutral, 2.4,0.7741,2.329, 2.4,0.7728,1.345, 2.67,0.9241,1.505, 2.67,0.8035,2.409, 4.347,0.7674,0.9267, 5.316,0.8321,0.84, -1.192E-07,0.1429,0.006872, 2.5,2.542,1.5
        cube = fullDeflectionPos, 4.305,0.8093,1.345, 3.458,0.732,1.726, 3.276,0.8562,1.505, 3.276,0.7434,2.409, 3.466,0.7997,1.232, 3.466,0.8,2.242, -1.192E-07,0.1429,1.55E-06, 2.5,2.542,2.275
        cube = fullDeflectionNeg, 3.458,0.7329,1.726, 4.305,0.8085,1.345, 3.276,0.8562,1.505, 3.276,0.7434,2.409, 3.466,0.7996,2.242, 3.466,0.8,1.232, -1.192E-07,0.1429,-1.55E-06, 2.5,2.542,2.275
        @cube,*[14] = 0.76
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// mk2 hybrid airbreathing aerospike engine
// no fuel, lifting surface, default drag cube
@PART[M2X_MATTOCKv2]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 2.45,0.5661,1.334, 2.45,0.5661,1.334, 2.494,0.9682,0.1866, 2.494,0.7455,1.07, 4.053,0.9014,0.7, 4.053,0.9014,0.7, 0,-0.3074,1.788E-07, 2.5,1.63,1.5
        cube = Clean, 1.552,0.6328,1.345, 1.552,0.6327,1.345, 2.494,0.9682,0.1827, 2.494,0.4802,1.624, 3.103,0.846,0.7667, 3.103,0.8481,0.7667, 0,-0.2557,1.788E-07, 2.5,1.525,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 inline airbreathing ventral turbofan engine
// no fuel, lifting surface, default drag cube
@PART[M2X_Pegasus]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.798,0.571,1.281, 2.798,0.5697,1.281, 2.599,0.8707,1.098, 2.599,0.9166,0.9758, 4.688,0.8843,0.7067, 4.688,0.9014,0.7, 0,0.06155,-1.502E-05, 2.5,1.874,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 nuclear rocket engine
// no fuel, no lifting surface, default drag cube
@PART[M2X_Pluto]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 5.304,0.631,1.271, 5.304,0.6309,1.271, 2.494,0.9524,0.2204, 2.494,0.5232,3.32, 8.837,0.8374,0.6933, 8.837,0.8374,0.6933, 0.000139,-0.1359,-5.96E-08, 2.5,3.546,1.5
        cube = Clean, 5.304,0.6369,2.467, 5.304,0.6309,1.271, 2.494,0.9524,0.2204, 2.494,0.4833,3.643, 7.455,0.8233,0.9467, 7.455,0.8239,0.86, 5.96E-07,-0.1359,-5.96E-08, 2.5,3.546,1.5
        cube = Fairing, 5.304,0.6369,2.467, 5.304,0.6309,1.271, 2.494,0.9524,0.2204, 2.494,0.4833,3.643, 7.455,0.8233,0.9467, 7.455,0.8239,0.86, 5.96E-07,-0.1359,-5.96E-08, 2.5,3.546,1.5
        cube = Clean, 3.9,0.6928,1.493, 3.9,0.6921,1.493, 2.494,0.9524,0.2203, 2.494,0.4437,3.643, 6.059,0.8052,0.9867, 6.059,0.8021,1, 5.96E-07,-0.1357,0, 2.5,3.545,1.5
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// mk2 turboramjet engine
// no fuel, no lifting surface, default drag cube
@PART[M2X_Ramjet]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.696,0.7191,1.345, 2.696,0.7192,1.345, 2.494,0.9719,0.166, 2.388,0.4989,2.123, 3.256,0.7738,0.8467, 3.256,0.7785,0.8467, 0,-0.07621,1.788E-07, 2.5,2.027,1.5
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// mk2 atomic jet engine
// no fuel, no lifting surface, default drag cube
@PART[M2X_AtomicJet]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.278,0.6622,1.345, 2.278,0.6623,1.345, 2.508,0.9447,1.107, 2.508,0.4803,2.511, 4.931,0.7811,0.9385, 4.931,0.7858,0.9586, 0,-0.1823,0.004711, 2.5,2.413,1.509
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// mk2 scramjet
// no fuel, no lifting surface, default drag cube
@PART[M2X_SCRamjet]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.369,0.68,1.345, 3.369,0.676,1.345, 3.478,0.8448,1.662, 3.478,0.349,3.782, 6.781,0.7794,1.489, 6.781,0.8895,1.618, 1.192E-07,-0.5265,0.2475, 2.5,3.835,1.995
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// mk2 turbofan vtol engine
// no fuel, no lifting surface, default drag cube
@PART[M2X_Siddeley]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 2.336,0.668,1.345, 2.336,0.6672,1.345, 2.494,0.9376,0.2413, 2.494,0.678,1.763, 3.133,0.8212,1.173, 3.133,0.8271,1.067, 1.669E-05,0.1051,0, 2.5,1.665,1.5
        cube = B, 2.336,0.6682,1.345, 2.336,0.6676,1.345, 2.494,0.9376,0.2413, 2.494,0.6631,1.763, 3.158,0.819,1.167, 3.158,0.8392,0.8533, 1.669E-05,0.1051,0, 2.5,1.665,1.5
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// mk2 turbofan engine
// no fuel, lifting surface, default drag cube
@PART[M2X_TurbofanMk2]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 2.229,0.6219,1.853, 2.229,0.6235,1.853, 2.494,0.9491,0.2489, 2.494,0.5791,2.335, 2.994,0.7833,1.307, 2.994,0.7851,1.307, -1.073E-06,-0.6626,-5.96E-08, 2.5,2.241,1.5
        cube = B, 1.803,0.616,1.345, 1.803,0.6161,1.345, 2.494,0.9491,0.243, 2.494,0.4695,1.666, 2.748,0.8353,0.94, 2.748,0.8372,0.8467, -1.073E-06,-0.3276,-5.96E-08, 2.5,1.571,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 turbojet engine
// no fuel, lifting surface, default drag cube
@PART[M2X_Turbojet]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.824,0.5355,1.345, 1.824,0.536,1.398, 2.494,0.9777,1.031, 2.494,0.4145,1.979, 3.529,0.8828,0.8467, 3.529,0.8823,1.227, 0.000114,-0.196,-0.000331, 2.5,1.886,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 turboprop engine
// no fuel, no lifting surface, default drag cube
@PART[M2X_Turboprop]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 2.251,0.6085,2.25, 2.251,0.6088,2.25, 3.523,0.6368,1.886, 3.524,0.9261,1.621, 2.666,0.7715,2.25, 2.666,0.7713,2.25, 0.001209,0.3257,-0.0003388, 4.019,1.788,4.019
        cube = B, 2.251,0.6085,2.25, 2.251,0.6088,2.25, 3.523,0.6368,1.886, 3.524,0.9261,1.621, 2.666,0.7715,2.25, 2.666,0.7713,2.25, 0.001209,0.3257,-0.0003388, 4.019,1.788,4.019
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// mk2 vacuum rocket engine
// no fuel, no lifting surface, default drag cube
@PART[M2X_RocketEngine]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Fairing, 2.004,0.5669,1.324, 2.004,0.5669,1.324, 2.494,0.9623,0.1801, 2.494,0.7661,1.05, 3.32,0.9013,0.7, 3.32,0.9014,0.7, 0,-0.4141,0, 2.5,1.331,1.5
        cube = Clean, 1.609,0.5845,1.345, 1.609,0.5849,1.345, 2.494,0.9623,0.1848, 2.494,0.5059,1.419, 2.753,0.8514,0.8467, 2.753,0.8527,0.8467, 0,-0.4088,0, 2.5,1.32,1.5
        @cube,*[14] = 0.76
        @cube,*[17] = 0.76
    }
}

// mk2 rotatable heavy vtol turbofan
// this seems to be some kind of control surface?
// no fuel, no lifting surface, default drag cube
@PART[M2X_HeavyVTOL]:NEEDS[Mk2Expansion]:FIRST
{
    // todo: temp fix, disable dynamic drag cubes so we can override them
    // I've left this one alone for now as the variants are too different to just hardcode a single drag cube for them.
    // this one will still be a draggy POS for a while..
    // @MODULE[ModuleB9PartSwitch]
    // {
    //     %affectDragCubes = false
    // }

    // !DRAG_CUBE {}
    // DRAG_CUBE
    // {
    //     cube = neutral, 4.483,0.5778,1.302, 4.483,0.5779,1.302, 2.503,0.9483,2.793, 2.504,0.9572,2.781, 7.495,0.8959,1.544, 7.495,0.8961,0.6953, 0,0.0005594,-0.004462, 2.5,2.994,1.505
    //     cube = fullDeflectionPos, 5.332,0.6398,1.821, 5.332,0.6396,1.969, 3.68,0.9248,2.38, 3.681,0.9307,2.367, 6.359,0.843,2, 6.349,0.8596,1.159, 0,0.0005594,-0.009756, 2.5,2.994,2.416
    //     cube = fullDeflectionNeg, 5.339,0.6348,1.821, 5.339,0.6354,1.959, 3.68,0.9248,2.38, 3.681,0.9307,2.367, 6.351,0.8593,2.011, 6.359,0.8432,1.139, 0,0.0005594,0.009756, 2.5,2.994,2.416
    //     @cube,*[14] = 0.76
    //     @cube,*[17] = 0.76
    // }
}

// fuel tanks

// short bicoupler
// no fuel, lifting wing, default drag cube
@PART[M2X_Shortbicoupler]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 0.8095,0.6568,1.345, 0.8095,0.6568,1.345, 2.921,0.7867,0.7008, 2.921,0.487,0.7234, 1.561,0.8892,0.84, 1.561,0.8893,0.8333, 0,-0.01183,-8.997E-09, 2.5,0.6235,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// hypersonic nosecone
// two variants
// this has twice the empty mass of an equivalently sized fuel tank
// fuel, lifting wing, default drag cube
@PART[M2X_HypersonicNose]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.29825 // 0.74t, up from 0.57t, adjusted for higher empty weight
    @cost *= 1.29697 // 2140, up from 1650

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        // this is the drag cube for the spade variant
        cube = Default, 4.816,0.5233,1.345, 4.816,0.5231,1.345, 2.494,0.1759,4.053, 2.494,0.9543,0.2286, 9.845,0.9111,0.8467, 9.845,0.91,0.8467, 0,1.153,4.768E-07, 2.5,5.1,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 twist adapter
// By default this generates lift, but only of course in one direction.
// that seems odd and fairly failure prone, so we remove that here.
// the default drag cube is also lower than what we'd assign, so we don't touch it.
// fuel, deleted lifting wing, default drag cube
@PART[M2X_InverterFuselage]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.61404 // 0.92t, up from 0.57t
    @cost *= 2.01739 // 2320, up from 1150 (for some reason this one was cheaper than the equivalent simple tank)

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    !MODULE[ModuleLiftingSurface] {}
}

// Mk2 to 3x 1.25 adapter
// this has a lot of fuel by default. A bit too much really.
// fuel, lifting wing, default drag cube
@PART[M2X_linearTricoupler]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 0.83636 // 0.46, down from 0.55t, adjusted to make this part lighter
    @cost *= 1.44231 // 1500, up from 1040. This shouldn't be cheaper than the bicoupler

    @RESOURCE[LiquidFuel]
    {
        @amount *= 0.8
        @maxAmount *= 0.8
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 0.8
        @maxAmount *= 0.8
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }
    
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.487,0.5452,1.957, 2.487,0.5452,1.942, 4.172,0.7505,1.847, 4.187,0.9061,1.878, 5.659,0.8418,0.8467, 5.659,0.8386,0.8467, 0.000401,-0.05069,7.987E-06, 3.698,1.779,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 to 2x mk2 adapter
// this has a lot of fuel by default. A bit too much really.
// also not sure why this has lifting wing behavior
// the mass fraction of this thing also isn't quite correct, so fix that.
// fuel, deleted lifting wing, default drag cube
@PART[M2X_Mk2bicoupler]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.39394 // 0.46t, up from 0.33t adjusted to make its mass fraction in line with other adapters
    @cost *= 1.48148 // 1600, up from 1080

    @RESOURCE[LiquidFuel]
    {
        @amount *= 0.8
        @maxAmount *= 0.8
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 0.8
        @maxAmount *= 0.8
    }

    !MODULE[ModuleLiftingSurface] {}
    
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.578,0.8125,1.594, 3.578,0.8125,1.594, 5.317,0.6105,2.05, 5.317,0.9454,2.05, 5.329,0.705,1.345, 5.329,0.7038,1.345, 0,-0.06309,-5.719E-09, 3,1.952,2.5
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// Mk2 nosecap
// three variants
// no fuel, lifting wing, default drag cube
@PART[M2X_SupersonicNose]:NEEDS[Mk2Expansion]:FIRST
{
    !MODULE[ModuleLiftingSurface] {}
    
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.88,0.5506,1.346, 1.88,0.55,1.357, 2.499,0.5299,1.505, 2.499,0.9545,0.2278, 3.007,0.8263,0.7933, 3.007,0.8238,0.9133, -0.001253,0.2119,1.299E-05, 2.503,1.56,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// half-length configurable tank
// fuel, lifting wing, default drag cube
@PART[M2X_UST]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.53333 // 0.23t, up from 0.15t very low mass so rounding causes this to deviate a bit
    @cost *= 1.6 // 600, up from 375

    @MODULE[ModuleB9PartSwitch] {
        @baseVolume *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }
    
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.494,0.5714,1.324, 1.494,0.5719,1.324, 2.494,0.9281,0.1647, 2.494,0.9281,0.1647, 2.49,0.9004,0.7, 2.49,0.8971,0.7, 0,2.384E-07,0, 2.5,1,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 to 2.5m adapter, short
// fuel, no lifting wing, default drag cube
@PART[M2X_Short25adapter]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.58621 // 0.46t, up from 0.29t
    @cost *= 3.5 // 1400, up from 400, as this shouldn't be cheaper than a normal MK2 or size-2 tank
    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.796,0.6932,1.345, 3.796,0.6932,1.345, 4.865,0.501,1.976, 4.865,0.7378,1.746, 4.736,0.8315,1.313, 4.736,0.8311,1.313, 0,-0.007813,-2.794E-09, 2.5,1.891,2.5
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// 1.25 to mk2 adapter, slanted
// fuel, lifting wing, default drag cube
@PART[M2X_SlantAdapterS]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.27586 // 0.37t, up from 0.29t
    @cost *= 1.3 // 715, up from 550

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.3
        @maxAmount *= 1.3
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.3
        @maxAmount *= 1.3
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.665,0.6484,1.334, 2.665,0.611,1.948, 2.744,0.621,2.007, 2.744,0.8819,1.974, 3.709,0.8144,0.8467, 3.709,0.8152,0.8467, 4.703E-05,0.01563,-1.42E-09, 2.5,1.906,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 to wing panel adapter
// this part seems very heavy comparably
// fuel, big lifting wing, custom drag cube
@PART[M2X_SpadeTail]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 0.73684 // 0.42t, down from 0.57t, actually reduce the mass as the original part is very heavy for its stats
    @cost *= 1 // 1050's fine for this part

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.3
        @maxAmount *= 1.3
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.3
        @maxAmount *= 1.3
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    @DRAG_CUBE
    {
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 to 2x 0.625m and 1x 1.25m adapter
// fuel, lifting wing, default drag cube
@PART[M2X_625tricoupler]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 0.71875 // 0.23t, down from 0.32t, the original part is very heavy compared to the stock adapters
    @cost *= 1 // cost is fine at 1450

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.654,0.5716,1.345, 1.654,0.5716,1.356, 2.52,0.9734,0.7773, 2.534,0.7769,1.283, 2.968,0.8811,0.8467, 2.968,0.8806,0.8467, -8.148E-05,-0.03379,8.003E-06, 2.501,1.186,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// structural

// mk2 decoupler
// this already has a custom, non-terrible drag cube.
// no fuel, no lifting wing, custom drag cube
// @PART[M2X_Decoupler]:NEEDS[Mk2Expansion]:FIRST
// {
    
// }

// mk2 endcap
// default drag cube isn't terrible
// no fuel, no lifting wing, default drag cube
// @PART[M2X_Endcap]:NEEDS[Mk2Expansion]:FIRST
// {
    
// }

// mk2 90 deg turn
// fuel, lifting wing, default drag cube
@PART[M2X_LHub]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.58621 // 0.46t, up from 0.29t
    @cost *= 1.6 // 1920, up from 1200

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.117,0.8291,1.664, 3.117,0.471,2.633, 3.131,0.8245,1.751, 3.131,0.465,2.955, 4.894,0.9006,0.7, 4.894,0.9027,0.7, 0.1894,0.03308,-1.922E-07, 2.967,3.288,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 T-connector
// fuel, lifting wing, default drag cube
@PART[M2X_THub]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.53125 // 0.49t, up from 0.32t, adjusted for extra dead mass
    @cost *= 1.6 // 1920, up from 1200

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.133,0.8235,1.336, 3.133,0.8223,1.336, 3.769,0.734,1.335, 3.769,0.5606,1.335, 6.271,0.9256,0.7, 6.271,0.9268,0.7, -4.768E-07,0.0003985,3.612E-11, 2.503,2.502,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 X-connector
// fuel, lifting wing, default drag cube
@PART[M2X_XHub]:NEEDS[Mk2Expansion]:FIRST
{
    @mass *= 1.48571 // 0.52t, up from 0.35t, adjusted for extra dead mass
    @cost *= 1.6 // 1920, up from 1200

    @RESOURCE[LiquidFuel]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @RESOURCE[Oxidizer]
    {
        @amount *= 1.6
        @maxAmount *= 1.6
    }

    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 3.769,0.7348,1.336, 3.769,0.7352,1.336, 3.769,0.7341,1.336, 3.769,0.7352,1.336, 6.271,0.9511,0.7, 6.271,0.9516,0.7, 0,-9.537E-07,-8.645E-14, 2.503,2.503,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// Radial mk2 attachment structure
// drag cube isn't terrible
// no fuel, no lifting wing, custom drag cube
// @PART[M2X_RadialMountA]:NEEDS[Mk2Expansion]:FIRST
// {

// }

// Radial mk2 attachment structure
// drag cube isn't terrible
// no fuel, no lifting wing, custom drag cube
// @PART[M2X_RadialMountB]:NEEDS[Mk2Expansion]:FIRST
// {

// }

// long 1.25 to mk2 structural adapter
// no fuel, lifting wing, custom drag cube
@PART[M2X_StructuralAdapterLong]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    @DRAG_CUBE {
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// short 1.25 to mk2 structural adapter
// no fuel, lifting wing, custom drag cube
@PART[M2X_StructuralAdapterS]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    @DRAG_CUBE {
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// short mk2 structural fuselage structural adapter
// no fuel, lifting wing, custom drag cube
@PART[M2X_StructuralTube]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    @DRAG_CUBE {
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// utility

// mk2 axial docking port
// drag cube is not terrible
// no fuel, no lifting wing, custom drag cube
// @PART[M2X_AligningDockingPort]:NEEDS[Mk2Expansion]:FIRST
// {

// }

// mk2 battery bank
// no fuel, no lifting wing, default drag cube
@PART[M2X_Mk2BatteryBank]:NEEDS[Mk2Expansion]:FIRST
{
    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 0.3773,0.576,1.324, 0.3773,0.5759,1.324, 2.496,0.9692,0.237, 2.496,0.9693,0.1604, 0.6348,0.9008,0.7, 0.6348,0.902,0.7, 0,0.000534,1.299E-05, 2.5,0.2544,1.5
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// mk2 cargo container
// no fuel, lifting wing, default drag cube
@PART[M2X_cargoContainer]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 1.494,0.5713,1.324, 1.494,0.5683,1.324, 2.494,0.9281,0.1647, 2.494,0.9281,0.1647, 2.49,0.9013,0.7, 2.49,0.891,0.7, 0,2.384E-07,0, 2.5,1,1.5
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 shielded docking port
// drag cubes are, surprisingly, not terrible
// no fuel, no lifting wing, default drag cubes
// @PART[M2X_ShieldedDockingPort]:NEEDS[Mk2Expansion]:FIRST
// {

// }

// mk2 lab
// no fuel, lifting wing, default drag cubes
@PART[M2X_SmallLab]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 6.154,0.5727,1.207, 6.154,0.5728,1.207, 2.519,0.9584,1.463, 2.519,0.9584,1.463, 10.3,0.8999,0.6933, 10.3,0.8936,0.6933, -4.768E-07,-4.768E-07,0, 2.5,4.138,1.5
        cube = B, 6.154,0.5727,1.207, 6.154,0.5728,1.207, 2.519,0.9584,1.463, 2.519,0.9584,1.463, 10.3,0.8999,0.6933, 10.3,0.8936,0.6933, -4.768E-07,-4.768E-07,0, 2.5,4.138,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 long cabin
// no fuel, lifting wing, default drag cubes
@PART[M2X_LongCabin]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 6.154,0.5722,1.207, 6.154,0.5727,1.207, 2.494,0.96,0.1871, 2.494,0.96,0.1871, 10.3,0.8999,0.6933, 10.3,0.8996,0.6933, -4.768E-07,-4.768E-07,0, 2.5,4.138,1.5
        cube = B, 6.154,0.5722,1.207, 6.154,0.5727,1.207, 2.494,0.96,0.1871, 2.494,0.96,0.1871, 10.3,0.8999,0.6933, 10.3,0.8996,0.6933, -4.768E-07,-4.768E-07,0, 2.5,4.138,1.5
        @cube,*[14] = 0.74
        @cube,*[17] = 0.74
    }
}

// mk2 nosecone payload bay
// this seems to have a broken custom drag cube implementation
// todo: bug report the broken custom drag cube
// no fuel, lifting wing, default drag cubes
@PART[M2X_Nosebay]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        // this is the drag cube for the big variant. for now we keep it for both as we can't override both variants
        cube = A, 2.952,0.5686,1.355, 2.952,0.5687,1.345, 2.502,0.3921,2.507, 2.502,0.6398,1.517, 4.805,0.8396,0.8468, 4.805,0.8381,0.8468, 5.388E-05,1.272,-4.709E-05, 2.5,2.544,1.5
        cube = B, 2.899,0.5741,1.345, 2.899,0.5744,1.345, 6.779,0.6131,1.781, 6.779,0.6618,1.709, 3.538,0.6499,2.788, 3.538,0.6536,2.788, 5.388E-05,0.9085,4.768E-07, 2.5,1.827,5.443
        @cube,0[14] = 0.74
        @cube,0[17] = 0.74
        @cube,1[14] = 0.9
        @cube,1[17] = 0.9
    }
}

// RCS chime
// no fuel, no lifting wing, default drag cube
// not really an mk2 part but it's the only chine part that isn't a wing surface
// and it has terrible drag cubes again
@PART[M2X_RCSChine]:NEEDS[Mk2Expansion]:FIRST
{
    // todo: temp fix, disable dynamic drag cubes so we can override them
    @MODULE[ModuleB9PartSwitch]
    {
        %affectDragCubes = false
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 0.1607,0.4179,0.5745, 0.1607,0.9973,0.1112, 0.06504,0.6596,0.4967, 0.06504,0.8466,0.2773, 0.1966,0.9131,0.249, 0.1966,0.9097,0.249, 0.2366,0.1092,1.49E-08, 0.4751,0.577,0.3
        @cube[5] = 0.76
        @cube[14] = 0.76
        @cube[17] = 0.76
    }
}

// mk2 inline RCS module
// drag cube is not terrible
// no fuel, lifting wing, custom drag cube
// @PART[M2X_SCRCS]:NEEDS[Mk2Expansion]:FIRST
// {

// }

// mk2 reactor module
// no fuel, lifting wing, default drag cube
@PART[M2X_Reactor]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = Default, 2.972,0.6238,1.495, 2.972,0.6238,1.495, 2.501,0.9665,0.9131, 2.501,0.9665,0.9045, 5.014,0.892,1.118, 5.014,0.8888,1.118, -3.576E-07,0,2.384E-07, 2.563,1.997,2.344
        @cube[14] = 0.74
        @cube[17] = 0.74
    }
}

// mk2 service bay
// has a custom drag cube, but it is broken
// todo: bug report the above
// no fuel, lifting wing, default drag cube
@PART[M2X_Servicebay]:NEEDS[Mk2Expansion]:FIRST
{
    @MODULE[ModuleLiftingSurface]
    {
        %useInternalDragModel = True
    }

    !DRAG_CUBE {}
    DRAG_CUBE
    {
        cube = A, 1.863,0.5688,1.324, 1.863,0.5688,1.324, 2.499,0.9567,0.4256, 2.499,0.9567,0.4256, 3.125,0.9001,0.7, 3.125,0.9001,0.7, 0,-0.007715,-5.96E-08, 2.5,1.247,1.5
        cube = B, 2.635,0.7149,2.006, 2.635,0.7149,2.006, 2.798,0.9606,0.4256, 2.798,0.9606,0.4256, 3.334,0.7622,1.821, 3.334,0.7628,1.821, -4.768E-07,-0.007715,1.192E-07, 3.992,1.247,2.615
        @cube,0[14] = 0.74
        @cube,0[17] = 0.74
        @cube,1[14] = 0.9
        @cube,1[17] = 0.9
    }
}
